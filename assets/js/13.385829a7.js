(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{373:function(a,t,e){"use strict";e.r(t);var s=e(42),n=Object(s.a)({},(function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"wrkchain-example"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#wrkchain-example"}},[a._v("#")]),a._v(" WRKChain Example")]),a._v(" "),e("p",[a._v("This document will guide you though registering a new WRKChain and submitting hashes via a manual process. Although hash submission is usually automated with the WRKOracle software, this guide will help you understand the process, and allow for testing.")]),a._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[a._v("IMPORTANT")]),a._v(" "),e("p",[a._v("Whenever you use "),e("code",[a._v("undcli")]),a._v(" to send Txs or query the chain ensure you pass the correct data to the "),e("code",[a._v("--chain-id")]),a._v(" and if necessary "),e("code",[a._v("--node=")]),a._v(" flags so that you connect to the correct network!")])]),a._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[a._v("Note")]),a._v(" "),e("p",[a._v("It is "),e("em",[a._v("HIGHLY")]),a._v(" recommended that you only undertake this guide on\neither "),e("RouterLink",{attrs:{to:"/examples/local-devnet.html"}},[a._v("DevNet")]),a._v(" or TestNet first.")],1)]),a._v(" "),e("h4",{attrs:{id:"contents"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#contents"}},[a._v("#")]),a._v(" Contents")]),a._v(" "),e("p"),e("div",{staticClass:"table-of-contents"},[e("ul",[e("li",[e("a",{attrs:{href:"#registering-your-wrkchain"}},[a._v("Registering your WRKChain")])]),e("li",[e("a",{attrs:{href:"#filter-wrkchain-metadata"}},[a._v("Filter WRKChain metadata")])]),e("li",[e("a",{attrs:{href:"#recording-hashes"}},[a._v("Recording Hashes")])]),e("li",[e("a",{attrs:{href:"#querying-a-wrkchain-on-mainchain"}},[a._v("Querying a WRKChain on Mainchain")])])])]),e("p"),a._v(" "),e("h2",{attrs:{id:"registering-your-wrkchain"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#registering-your-wrkchain"}},[a._v("#")]),a._v(" Registering your WRKChain")]),a._v(" "),e("p",[a._v("Registration is required so that the WRKChain has an identifier on Mainchain.\nRegistration incurs a one-time fee.")]),a._v(" "),e("p",[a._v("The following "),e("code",[a._v("undcli")]),a._v(" command can be used to register your WRKChain, and assumes you have a local full node running, connected to either DevNet or TestNet:")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("undcli tx wrkchain register --moniker"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"[YOUR_MONIKER]"')]),a._v(" --genesis"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"[GENESIS_BLOCK_HASH]"')]),a._v(" --name"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"[WRKCHAIN NAME]"')]),a._v(" --base"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"[WRKCHAIN_TYPE]"')]),a._v(" --from "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("from_account"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" --chain-id "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("chain_id"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" --gas"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("auto --gas-adjustment"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.5")]),a._v("\n")])])]),e("ul",[e("li",[e("code",[a._v("[YOUR_MONIKER]")]),a._v(" - any alphanumeric identifier you want to give your WRKChain, e.g. wrkchain1")]),a._v(" "),e("li",[e("code",[a._v("[GENESIS_BLOCK_HASH]")]),a._v(" - the hash value for your genesis block. The "),e("code",[a._v("--genesis")]),a._v(" flag is optional. The hash can be obtained by running your genesis through a sha256 generator, for example.")]),a._v(" "),e("li",[e("code",[a._v("[WRKCHAIN NAME]")]),a._v(" - a name for your WRKChain, e.g. My First WRKChain. Optional")]),a._v(" "),e("li",[e("code",[a._v("[from_account]")]),a._v(" - your local account identifier (see "),e("RouterLink",{attrs:{to:"/examples/accounts-wallets.html"}},[a._v("Accounts and Wallets")]),a._v("). This will be used as the WRKChain Owner. "),e("strong",[a._v("Only the owner will be able to submit block hashes, so it is important to keep this account safe!")])],1),a._v(" "),e("li",[e("code",[a._v("[chain_id]")]),a._v(" - the ID of the chain to run the transaction on")]),a._v(" "),e("li",[e("code",[a._v("[WRKCHAIN_TYPE]")]),a._v(" - the type of WRKChain. Currently supported by WRKOracle are WRKChains built using "),e("code",[a._v("cosmos")]),a._v(", "),e("code",[a._v("eos")]),a._v(", "),e("code",[a._v("geth")]),a._v(", "),e("code",[a._v("neo")]),a._v(", "),e("code",[a._v("stellar")]),a._v(", "),e("code",[a._v("tendermint")]),a._v(".")])]),a._v(" "),e("p",[a._v('For example, we have a local account and key set up called "testwrk", and want\nto register a new WRKChain, with the moniker "wrkchain1" called "WRKChain Example 1":')]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("undcli tx wrkchain register --moniker"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"wrkchain1"')]),a._v(" --genesis"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"78521D6EFBEDF6D7EE9C73EDD3443B8021DADBE06ECE81F639B6EC57D8E3F3EA"')]),a._v(" --name"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"WRKChain Example 1"')]),a._v(" --base"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"tendermint"')]),a._v(" --from testwrk --chain-id FUND-Mainchain-DevNet --gas"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("auto --gas-adjustment"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.25")]),a._v("\n")])])]),e("p",[a._v("Once broadcast, you will receive confirmation with the TX Hash, which can be used to query the Tx.")]),a._v(" "),e("p",[a._v("Your WRKCHain's on-chain ID will be embedded in the Tx query result. Alternatively, you can run a search query to get your WRKChain's details, for example:")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("undcli query wrkchain search --moniker wrkchain1 --chain-id FUND-Mainchain-DevNet\n")])])]),e("p",[a._v("will return a result similar to:")]),a._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"wrkchain_id"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"1"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"moniker"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"wrkchain1"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"name"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"WRKChain Example 1"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"genesis"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"78521D6EFBEDF6D7EE9C73EDD3443B8021DADBE06ECE81F639B6EC57D8E3F3EA"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"type"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"tendermint"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"lastblock"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"0"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"num_blocks"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"0"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"reg_time"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"1585752449"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[a._v('"owner"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"und1x8pl6wzqf9atkm77ymc5vn5dnpl5xytmn200xy"')]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n\n")])])]),e("p",[a._v("The "),e("code",[a._v("wrkchain_id")]),a._v(" value is what is required to submit hashes, and find your WRKChain's submitted block hashes.")]),a._v(" "),e("p",[a._v("The "),e("code",[a._v("lastblock")]),a._v(" tells us for which block number hashes were last submitted for the WRKChain, and "),e("code",[a._v("num_blocks")]),a._v(" the number of block hashes the WRKChain has submitted in total. Finally, "),e("code",[a._v("reg_time")]),a._v(" is a UNIX timestamp for when the WRKChain was registered on Mainchain.")]),a._v(" "),e("blockquote",[e("p",[e("strong",[a._v("Important")]),a._v(": Only the "),e("code",[a._v("owner")]),a._v(" - i.e. the account used to register the WRKChain - will be able to submit block hashes.")])]),a._v(" "),e("h2",{attrs:{id:"filter-wrkchain-metadata"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#filter-wrkchain-metadata"}},[a._v("#")]),a._v(" Filter WRKChain metadata")]),a._v(" "),e("p",[a._v("WRKChain metadata can be searched for on Mainchain:")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("undcli query wrkchain search --moniker wrkchain1\nundcli query wrkchain search --owner und1chknpc8nf2tmj5582vhlvphnjyekc9ypspx5ay\nundcli query wrkchain search --page=2 --limit=100\n")])])]),e("h2",{attrs:{id:"recording-hashes"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#recording-hashes"}},[a._v("#")]),a._v(" Recording Hashes")]),a._v(" "),e("p",[a._v("Once successfully registered, you will be able to submit block hashes however\nfrequently suits your needs. To simulate how the WRKOracle works, we can run the following command to submit hashes:")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("undcli tx wrkchain record "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" --wc_height"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("BLOCK_HEIGHT"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" --block_hash"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("BLOCK_HASH"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" --parent_hash"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("PARENT_HASH"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" --hash1"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("HASH1"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" --hash2"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("HASH2"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" --hash3"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("HASH3"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" --from "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("account_name"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" --chain-id "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("chain_id"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" --gas"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("auto --gas-adjustment"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.5")]),a._v("\n")])])]),e("ul",[e("li",[e("code",[a._v("[BLOCK_HEIGHT]")]),a._v(" - the height/number of the WRKChain block you are submitting hashes for")]),a._v(" "),e("li",[e("code",[a._v("[BLOCK_HASH]")]),a._v(" - the main block hash")]),a._v(" "),e("li",[e("code",[a._v("[PARENT_HASH]")]),a._v(" - the main block's parent block hash (optional)")]),a._v(" "),e("li",[e("code",[a._v("[HASH1]")]),a._v(" - an optional, arbitrary hash. This can be, for example, the Tx Merkle root hash")]),a._v(" "),e("li",[e("code",[a._v("[HASH2]")]),a._v(" - an optional, arbitrary hash. This can be, for example, the Tx Merkle root hash")]),a._v(" "),e("li",[e("code",[a._v("[HASH3]")]),a._v(" - an optional, arbitrary hash. This can be, for example, the Tx Merkle root hash")]),a._v(" "),e("li",[e("code",[a._v("[from_account]")]),a._v(" - your local account identifier (see "),e("RouterLink",{attrs:{to:"/examples/accounts-wallets.html"}},[a._v("Accounts and Wallets")]),a._v("). This "),e("strong",[a._v("must")]),a._v(" be the same as the "),e("strong",[a._v("owner")]),a._v(" used to register the WRKChain.")],1),a._v(" "),e("li",[e("code",[a._v("[chain_id]")]),a._v(" - the ID of the chain to run the transaction on")])]),a._v(" "),e("p",[a._v("For example, if we just want to submit the block hash for block number 123, we can run:")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("undcli tx wrkchain record "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" --wc_height"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("123")]),a._v(" --block_hash"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("1BB457C575E72D7401C809B66290FAC56347223912F2484BA7E881D42495CD0F --from testwrk --chain-id FUND-Mainchain-DevNet --gas"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("auto --gas-adjustment"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.5")]),a._v("\n")])])]),e("h2",{attrs:{id:"querying-a-wrkchain-on-mainchain"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#querying-a-wrkchain-on-mainchain"}},[a._v("#")]),a._v(" Querying a WRKChain on Mainchain")]),a._v(" "),e("p",[a._v("To retrieve a particular hash submitted for a WRKChain, we can run:")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("undcli query wrkchain block "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("WRKCHAIN_ID"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("HEIGHT"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),e("ul",[e("li",[e("code",[a._v("[WRKCHAIN_ID]")]),a._v(" - the numeric ID for the WRKChain")]),a._v(" "),e("li",[e("code",[a._v("[HEIGHT]")]),a._v(" - the block number we wish to retrieve")])]),a._v(" "),e("p",[a._v("If "),e("code",[a._v("[HEIGHT]")]),a._v(" has been submitted for "),e("code",[a._v("[WRKCHAIN_ID]")]),a._v(", the data will be\nreturned in a JSON object, If not, the returned object will contain empty\nvalues, meaning the WRKChain has not submitted a value for this block\nheight.")])])}),[],!1,null,null,null);t.default=n.exports}}]);