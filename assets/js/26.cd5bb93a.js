(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{383:function(e,t,a){"use strict";a.r(t);var s=a(42),n=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"deploying-a-local-devnet"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deploying-a-local-devnet"}},[e._v("#")]),e._v(" Deploying a Local DevNet")]),e._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("IMPORTANT")]),e._v(" "),a("p",[e._v("Whenever you use "),a("code",[e._v("undcli")]),e._v(" to send Txs or query the chain ensure you pass the correct data to the "),a("code",[e._v("--chain-id")]),e._v(" and if necessary "),a("code",[e._v("--node=")]),e._v(" flags so that you connect to the correct network!")])]),e._v(" "),a("p",[e._v("The repository contains a ready to deploy Docker composition for local\ndevelopment and testing. DevNet comes in two flavours - "),a("code",[e._v("local")]),e._v(" and "),a("code",[e._v("upstream")]),e._v(".")]),e._v(" "),a("h4",{attrs:{id:"contents"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#contents"}},[e._v("#")]),e._v(" Contents")]),e._v(" "),a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#local-build"}},[e._v("Local build")])]),a("li",[a("a",{attrs:{href:"#pure-upstream-build"}},[e._v("Pure Upstream build")])]),a("li",[a("a",{attrs:{href:"#devnet-chain-id"}},[e._v("DevNet Chain ID")])]),a("li",[a("a",{attrs:{href:"#devnet-rpc-nodes"}},[e._v("DevNet RPC Nodes")])]),a("li",[a("a",{attrs:{href:"#devnet-docker-containers"}},[e._v("DevNet Docker containers")])]),a("li",[a("a",{attrs:{href:"#devnet-test-accounts-wallets-and-keys"}},[e._v("DevNet test accounts, wallets and keys")]),a("ul",[a("li",[a("a",{attrs:{href:"#importing-the-devnet-keys"}},[e._v("Importing the DevNet keys")])]),a("li",[a("a",{attrs:{href:"#useful-devnet-defaults-for-undcli"}},[e._v("Useful DevNet Defaults for undcli")])]),a("li",[a("a",{attrs:{href:"#rest-api-endpoints"}},[e._v("REST API Endpoints")])])])])])]),a("p"),e._v(" "),a("h2",{attrs:{id:"local-build"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#local-build"}},[e._v("#")]),e._v(" Local build")]),e._v(" "),a("p",[e._v("The local build copies the current local codebase to the Docker containers, and is used during development to test changes before committing to the repository.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("docker-compose -f Docker/docker-compose.local.yml up --build\ndocker-compose -f Docker/docker-compose.local.yml down --remove-orphans\n")])])]),a("p",[e._v("or using the "),a("code",[e._v("make")]),e._v(" target:")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("make")]),e._v(" devnet\n")])])]),a("p",[e._v("To bring DevNet down cleanly, use "),a("kbd",[e._v("Ctrl")]),e._v("+"),a("kbd",[e._v("C")]),e._v(", followed by:")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("make")]),e._v(" devnet-down\n")])])]),a("h2",{attrs:{id:"pure-upstream-build"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pure-upstream-build"}},[e._v("#")]),e._v(" Pure Upstream build")]),e._v(" "),a("p",[e._v("Pure upstream downloads the "),a("code",[e._v("master")]),e._v(" branch on GitHub to build the binaries, and is useful for testing the latest code committed to "),a("code",[e._v("master")]),e._v(", for example for pre-release testing.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("docker-compose -f Docker/docker-compose.upstream.yml up --build\ndocker-compose -f Docker/docker-compose.upstream.yml down --remove-orphans\n")])])]),a("p",[e._v("or using the "),a("code",[e._v("make")]),e._v(" target:")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("make")]),e._v(" devnet-pristine\n")])])]),a("p",[e._v("To bring DevNet down cleanly, use "),a("kbd",[e._v("Ctrl")]),e._v("+"),a("kbd",[e._v("C")]),e._v(", followed by:")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("make")]),e._v(" devnet-pristine-down\n")])])]),a("h2",{attrs:{id:"devnet-chain-id"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#devnet-chain-id"}},[e._v("#")]),e._v(" DevNet Chain ID")]),e._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("IMPORTANT")]),e._v(" "),a("p",[e._v("DevNet's Chain ID is "),a("code",[e._v("FUND-Mainchain-DevNet")]),e._v(". Any "),a("code",[e._v("und")]),e._v(" or "),a("code",[e._v("undcli")]),e._v(" commands\nintended for DevNet should use the flag "),a("code",[e._v("--chain-id FUND-Mainchain-DevNet")])])]),e._v(" "),a("h2",{attrs:{id:"devnet-rpc-nodes"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#devnet-rpc-nodes"}},[e._v("#")]),e._v(" DevNet RPC Nodes")]),e._v(" "),a("p",[e._v("By default "),a("code",[e._v("undcli")]),e._v(" will attempt to broadcast transactions to tcp://localhost:26656. However, any of the DevNet nodes can be used to send transactions via "),a("code",[e._v("undcli")]),e._v(" using the "),a("code",[e._v("--node=")]),e._v(" flag, for example:")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("undcli query tx TX_HASH --chain-id FUND-Mainchain-DevNet --node"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("tcp://172.25.0.3:26661\n")])])]),a("p",[e._v("See below for each node's RPC IPs and Ports.")]),e._v(" "),a("h2",{attrs:{id:"devnet-docker-containers"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#devnet-docker-containers"}},[e._v("#")]),e._v(" DevNet Docker containers")]),e._v(" "),a("p",[e._v("The DevNet composition will spin up three full nodes, one light REST client, and a proxy server in the following Docker containers:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("node1")]),e._v(" - Full validation node, RPC on 172.25.0.3:26661, P2P on 172.25.0.3:26651")]),e._v(" "),a("li",[a("code",[e._v("node2")]),e._v(" - Full validation node, RPC on 172.25.0.4:26662, P2P on 172.25.0.4:26652")]),e._v(" "),a("li",[a("code",[e._v("node3")]),e._v(" - Full validation node, RPC on 172.25.0.5:26663, P2P on 172.25.0.5:26653")]),e._v(" "),a("li",[a("code",[e._v("rest-server")]),e._v(" - Light Client for REST interaction on 172.25.0.6:1317")]),e._v(" "),a("li",[a("code",[e._v("proxy")]),e._v(" - a small proxy server allowing CORS queries to the "),a("code",[e._v("rest-server")]),e._v(" via 172.25.0.7:1318")])]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("NOTE")]),e._v(" "),a("p",[e._v("The DevNet nodes:"),a("br"),e._v("\nP2P ports set to 26651, 26652 and 26653 respectively, and not the default 26656."),a("br"),e._v("\nRPC ports set to 26661, 26662 and 26663 respectively, and not the default 26657.")])]),e._v(" "),a("h2",{attrs:{id:"devnet-test-accounts-wallets-and-keys"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#devnet-test-accounts-wallets-and-keys"}},[e._v("#")]),e._v(" DevNet test accounts, wallets and keys")]),e._v(" "),a("p",[e._v("DevNet is deployed with a pre-defined "),a("a",{attrs:{href:"https://raw.githubusercontent.com/unification-com/mainchain/master/Docker/assets/node1/config/genesis.json",target:"_blank",rel:"noopener noreferrer"}},[e._v("genesis.json"),a("OutboundLink")],1),e._v(", containing several test accounts loaded with FUND and pre-defined validators with self delegation.")]),e._v(" "),a("p",[e._v("See "),a("a",{attrs:{href:"https://github.com/unification-com/mainchain/blob/master/Docker/README.md",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/unification-com/mainchain/blob/master/Docker/README.md"),a("OutboundLink")],1),e._v(" for the mnemonic phrases and keys used by the above nodes, and for test accounts included in DevNet's genesis.")]),e._v(" "),a("h3",{attrs:{id:"importing-the-devnet-keys"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#importing-the-devnet-keys"}},[e._v("#")]),e._v(" Importing the DevNet keys")]),e._v(" "),a("p",[e._v("The DevNet accounts can be imported as follows. First, build the "),a("code",[e._v("und")]),e._v(" and\n"),a("code",[e._v("undcli")]),e._v(" binaries:")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("make")]),e._v(" build\n")])])]),a("p",[e._v("Then, for each account run the following command:")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("./build/undcli keys "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("add")]),e._v(" node1 --recover\n")])])]),a("p",[e._v("You will be prompted to enter the mnemonic phrase, and a password for your OS's keyring. Change "),a("code",[e._v("node1")]),e._v(" to an appropriate moniker for each imported account.")]),e._v(" "),a("h3",{attrs:{id:"useful-devnet-defaults-for-undcli"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#useful-devnet-defaults-for-undcli"}},[e._v("#")]),e._v(" Useful DevNet Defaults for "),a("code",[e._v("undcli")])]),e._v(" "),a("p",[a("code",[e._v("undcli")]),e._v(" defaults for DevNet can be set as follows. This will set the corresponding values in "),a("code",[e._v("$HOME/.und_cli/config/config.toml")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("undcli config chain-id FUND-Mainchain-DevNet\nundcli config node tcp://localhost:26661\n")])])]),a("h3",{attrs:{id:"rest-api-endpoints"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rest-api-endpoints"}},[e._v("#")]),e._v(" REST API Endpoints")]),e._v(" "),a("p",[e._v("With DevNet up, the REST API endpoints can be seen via "),a("a",{attrs:{href:"http://localhost:1318/swagger-ui/",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://localhost:1318/swagger-ui/"),a("OutboundLink")],1)]),e._v(" "),a("h4",{attrs:{id:"next"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#next"}},[e._v("#")]),e._v(" Next")]),e._v(" "),a("p",[e._v("Creating and importing "),a("RouterLink",{attrs:{to:"/networks/accounts-wallets.html"}},[e._v("accounts and wallets")]),e._v(", "),a("RouterLink",{attrs:{to:"/networks/transactions.html"}},[e._v("sending transactions")])],1)])}),[],!1,null,null,null);t.default=n.exports}}]);