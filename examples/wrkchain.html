<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>WRKChain Example | Mainchain Documentation</title>
    <meta name="generator" content="VuePress 1.5.4">
    
    <meta name="description" content="Welcome to the documentation for Unification Mainchain">
    <link rel="preload" href="/assets/css/0.styles.7eae06db.css" as="style"><link rel="preload" href="/assets/js/app.741cff61.js" as="script"><link rel="preload" href="/assets/js/2.77c7029e.js" as="script"><link rel="preload" href="/assets/js/13.385829a7.js" as="script"><link rel="prefetch" href="/assets/js/10.f37d54ff.js"><link rel="prefetch" href="/assets/js/11.9b05973b.js"><link rel="prefetch" href="/assets/js/12.f09b51f7.js"><link rel="prefetch" href="/assets/js/14.998374fc.js"><link rel="prefetch" href="/assets/js/15.14749093.js"><link rel="prefetch" href="/assets/js/16.70bcaf63.js"><link rel="prefetch" href="/assets/js/17.52701c2e.js"><link rel="prefetch" href="/assets/js/18.4717075d.js"><link rel="prefetch" href="/assets/js/19.8072ada9.js"><link rel="prefetch" href="/assets/js/20.a337da92.js"><link rel="prefetch" href="/assets/js/21.f6ac7b29.js"><link rel="prefetch" href="/assets/js/22.0b8e3f64.js"><link rel="prefetch" href="/assets/js/23.8d745efd.js"><link rel="prefetch" href="/assets/js/24.417b10a5.js"><link rel="prefetch" href="/assets/js/25.578a1199.js"><link rel="prefetch" href="/assets/js/26.cd5bb93a.js"><link rel="prefetch" href="/assets/js/27.b126edc4.js"><link rel="prefetch" href="/assets/js/28.e4a7ded3.js"><link rel="prefetch" href="/assets/js/29.6e1e7b98.js"><link rel="prefetch" href="/assets/js/3.edee95fc.js"><link rel="prefetch" href="/assets/js/30.ca3ce80a.js"><link rel="prefetch" href="/assets/js/31.4d9fb6a8.js"><link rel="prefetch" href="/assets/js/32.8a3a1f24.js"><link rel="prefetch" href="/assets/js/33.7ddc8051.js"><link rel="prefetch" href="/assets/js/34.9dcf1fa4.js"><link rel="prefetch" href="/assets/js/35.5ebf71ec.js"><link rel="prefetch" href="/assets/js/36.3a89ece3.js"><link rel="prefetch" href="/assets/js/4.6201d3d6.js"><link rel="prefetch" href="/assets/js/5.a58ba2da.js"><link rel="prefetch" href="/assets/js/6.7de9e217.js"><link rel="prefetch" href="/assets/js/7.01a03464.js"><link rel="prefetch" href="/assets/js/8.724889e8.js"><link rel="prefetch" href="/assets/js/9.ae3ae2f8.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7eae06db.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/img/unification_logoblack.png" alt="Mainchain Documentation" class="logo"> <span class="site-name can-hide">Mainchain Documentation</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/unification-com/mainchain/releases" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Releases
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/unification-com/mainchain" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/unification-com/mainchain/releases" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Releases
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/unification-com/mainchain" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>About Mainchain</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Install and Use the Software</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Networks</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Tx &amp; Query Examples</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/examples/transactions.html" class="sidebar-link">Sending Simple Transactions</a></li><li><a href="/examples/wrkchain.html" aria-current="page" class="active sidebar-link">WRKChain Example</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/examples/wrkchain.html#registering-your-wrkchain" class="sidebar-link">Registering your WRKChain</a></li><li class="sidebar-sub-header"><a href="/examples/wrkchain.html#filter-wrkchain-metadata" class="sidebar-link">Filter WRKChain metadata</a></li><li class="sidebar-sub-header"><a href="/examples/wrkchain.html#recording-hashes" class="sidebar-link">Recording Hashes</a></li><li class="sidebar-sub-header"><a href="/examples/wrkchain.html#querying-a-wrkchain-on-mainchain" class="sidebar-link">Querying a WRKChain on Mainchain</a></li></ul></li><li><a href="/examples/beacon.html" class="sidebar-link">BEACON Example</a></li><li><a href="/examples/enterprise-fund.html" class="sidebar-link">Enterprise FUND Example</a></li><li><a href="/examples/finchain.html" class="sidebar-link">WRKChain: Finchains</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>In-depth Guides</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Developers</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="wrkchain-example"><a href="#wrkchain-example" class="header-anchor">#</a> WRKChain Example</h1> <p>This document will guide you though registering a new WRKChain and submitting hashes via a manual process. Although hash submission is usually automated with the WRKOracle software, this guide will help you understand the process, and allow for testing.</p> <div class="custom-block warning"><p class="custom-block-title">IMPORTANT</p> <p>Whenever you use <code>undcli</code> to send Txs or query the chain ensure you pass the correct data to the <code>--chain-id</code> and if necessary <code>--node=</code> flags so that you connect to the correct network!</p></div> <div class="custom-block tip"><p class="custom-block-title">Note</p> <p>It is <em>HIGHLY</em> recommended that you only undertake this guide on
either <a href="/examples/local-devnet.html">DevNet</a> or TestNet first.</p></div> <h4 id="contents"><a href="#contents" class="header-anchor">#</a> Contents</h4> <p></p><div class="table-of-contents"><ul><li><a href="#registering-your-wrkchain">Registering your WRKChain</a></li><li><a href="#filter-wrkchain-metadata">Filter WRKChain metadata</a></li><li><a href="#recording-hashes">Recording Hashes</a></li><li><a href="#querying-a-wrkchain-on-mainchain">Querying a WRKChain on Mainchain</a></li></ul></div><p></p> <h2 id="registering-your-wrkchain"><a href="#registering-your-wrkchain" class="header-anchor">#</a> Registering your WRKChain</h2> <p>Registration is required so that the WRKChain has an identifier on Mainchain.
Registration incurs a one-time fee.</p> <p>The following <code>undcli</code> command can be used to register your WRKChain, and assumes you have a local full node running, connected to either DevNet or TestNet:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>undcli tx wrkchain register --moniker<span class="token operator">=</span><span class="token string">&quot;[YOUR_MONIKER]&quot;</span> --genesis<span class="token operator">=</span><span class="token string">&quot;[GENESIS_BLOCK_HASH]&quot;</span> --name<span class="token operator">=</span><span class="token string">&quot;[WRKCHAIN NAME]&quot;</span> --base<span class="token operator">=</span><span class="token string">&quot;[WRKCHAIN_TYPE]&quot;</span> --from <span class="token punctuation">[</span>from_account<span class="token punctuation">]</span> --chain-id <span class="token punctuation">[</span>chain_id<span class="token punctuation">]</span> --gas<span class="token operator">=</span>auto --gas-adjustment<span class="token operator">=</span><span class="token number">1.5</span>
</code></pre></div><ul><li><code>[YOUR_MONIKER]</code> - any alphanumeric identifier you want to give your WRKChain, e.g. wrkchain1</li> <li><code>[GENESIS_BLOCK_HASH]</code> - the hash value for your genesis block. The <code>--genesis</code> flag is optional. The hash can be obtained by running your genesis through a sha256 generator, for example.</li> <li><code>[WRKCHAIN NAME]</code> - a name for your WRKChain, e.g. My First WRKChain. Optional</li> <li><code>[from_account]</code> - your local account identifier (see <a href="/examples/accounts-wallets.html">Accounts and Wallets</a>). This will be used as the WRKChain Owner. <strong>Only the owner will be able to submit block hashes, so it is important to keep this account safe!</strong></li> <li><code>[chain_id]</code> - the ID of the chain to run the transaction on</li> <li><code>[WRKCHAIN_TYPE]</code> - the type of WRKChain. Currently supported by WRKOracle are WRKChains built using <code>cosmos</code>, <code>eos</code>, <code>geth</code>, <code>neo</code>, <code>stellar</code>, <code>tendermint</code>.</li></ul> <p>For example, we have a local account and key set up called &quot;testwrk&quot;, and want
to register a new WRKChain, with the moniker &quot;wrkchain1&quot; called &quot;WRKChain Example 1&quot;:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>undcli tx wrkchain register --moniker<span class="token operator">=</span><span class="token string">&quot;wrkchain1&quot;</span> --genesis<span class="token operator">=</span><span class="token string">&quot;78521D6EFBEDF6D7EE9C73EDD3443B8021DADBE06ECE81F639B6EC57D8E3F3EA&quot;</span> --name<span class="token operator">=</span><span class="token string">&quot;WRKChain Example 1&quot;</span> --base<span class="token operator">=</span><span class="token string">&quot;tendermint&quot;</span> --from testwrk --chain-id FUND-Mainchain-DevNet --gas<span class="token operator">=</span>auto --gas-adjustment<span class="token operator">=</span><span class="token number">1.25</span>
</code></pre></div><p>Once broadcast, you will receive confirmation with the TX Hash, which can be used to query the Tx.</p> <p>Your WRKCHain's on-chain ID will be embedded in the Tx query result. Alternatively, you can run a search query to get your WRKChain's details, for example:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>undcli query wrkchain search --moniker wrkchain1 --chain-id FUND-Mainchain-DevNet
</code></pre></div><p>will return a result similar to:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;wrkchain_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;moniker&quot;</span><span class="token operator">:</span> <span class="token string">&quot;wrkchain1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;WRKChain Example 1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;genesis&quot;</span><span class="token operator">:</span> <span class="token string">&quot;78521D6EFBEDF6D7EE9C73EDD3443B8021DADBE06ECE81F639B6EC57D8E3F3EA&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;tendermint&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;lastblock&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;num_blocks&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;reg_time&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1585752449&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;owner&quot;</span><span class="token operator">:</span> <span class="token string">&quot;und1x8pl6wzqf9atkm77ymc5vn5dnpl5xytmn200xy&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>

</code></pre></div><p>The <code>wrkchain_id</code> value is what is required to submit hashes, and find your WRKChain's submitted block hashes.</p> <p>The <code>lastblock</code> tells us for which block number hashes were last submitted for the WRKChain, and <code>num_blocks</code> the number of block hashes the WRKChain has submitted in total. Finally, <code>reg_time</code> is a UNIX timestamp for when the WRKChain was registered on Mainchain.</p> <blockquote><p><strong>Important</strong>: Only the <code>owner</code> - i.e. the account used to register the WRKChain - will be able to submit block hashes.</p></blockquote> <h2 id="filter-wrkchain-metadata"><a href="#filter-wrkchain-metadata" class="header-anchor">#</a> Filter WRKChain metadata</h2> <p>WRKChain metadata can be searched for on Mainchain:</p> <div class="language- extra-class"><pre class="language-text"><code>undcli query wrkchain search --moniker wrkchain1
undcli query wrkchain search --owner und1chknpc8nf2tmj5582vhlvphnjyekc9ypspx5ay
undcli query wrkchain search --page=2 --limit=100
</code></pre></div><h2 id="recording-hashes"><a href="#recording-hashes" class="header-anchor">#</a> Recording Hashes</h2> <p>Once successfully registered, you will be able to submit block hashes however
frequently suits your needs. To simulate how the WRKOracle works, we can run the following command to submit hashes:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>undcli tx wrkchain record <span class="token number">1</span> --wc_height<span class="token operator">=</span><span class="token punctuation">[</span>BLOCK_HEIGHT<span class="token punctuation">]</span> --block_hash<span class="token operator">=</span><span class="token punctuation">[</span>BLOCK_HASH<span class="token punctuation">]</span> --parent_hash<span class="token operator">=</span><span class="token punctuation">[</span>PARENT_HASH<span class="token punctuation">]</span> --hash1<span class="token operator">=</span><span class="token punctuation">[</span>HASH1<span class="token punctuation">]</span> --hash2<span class="token operator">=</span><span class="token punctuation">[</span>HASH2<span class="token punctuation">]</span> --hash3<span class="token operator">=</span><span class="token punctuation">[</span>HASH3<span class="token punctuation">]</span> --from <span class="token punctuation">[</span>account_name<span class="token punctuation">]</span> --chain-id <span class="token punctuation">[</span>chain_id<span class="token punctuation">]</span> --gas<span class="token operator">=</span>auto --gas-adjustment<span class="token operator">=</span><span class="token number">1.5</span>
</code></pre></div><ul><li><code>[BLOCK_HEIGHT]</code> - the height/number of the WRKChain block you are submitting hashes for</li> <li><code>[BLOCK_HASH]</code> - the main block hash</li> <li><code>[PARENT_HASH]</code> - the main block's parent block hash (optional)</li> <li><code>[HASH1]</code> - an optional, arbitrary hash. This can be, for example, the Tx Merkle root hash</li> <li><code>[HASH2]</code> - an optional, arbitrary hash. This can be, for example, the Tx Merkle root hash</li> <li><code>[HASH3]</code> - an optional, arbitrary hash. This can be, for example, the Tx Merkle root hash</li> <li><code>[from_account]</code> - your local account identifier (see <a href="/examples/accounts-wallets.html">Accounts and Wallets</a>). This <strong>must</strong> be the same as the <strong>owner</strong> used to register the WRKChain.</li> <li><code>[chain_id]</code> - the ID of the chain to run the transaction on</li></ul> <p>For example, if we just want to submit the block hash for block number 123, we can run:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>undcli tx wrkchain record <span class="token number">1</span> --wc_height<span class="token operator">=</span><span class="token number">123</span> --block_hash<span class="token operator">=</span>1BB457C575E72D7401C809B66290FAC56347223912F2484BA7E881D42495CD0F --from testwrk --chain-id FUND-Mainchain-DevNet --gas<span class="token operator">=</span>auto --gas-adjustment<span class="token operator">=</span><span class="token number">1.5</span>
</code></pre></div><h2 id="querying-a-wrkchain-on-mainchain"><a href="#querying-a-wrkchain-on-mainchain" class="header-anchor">#</a> Querying a WRKChain on Mainchain</h2> <p>To retrieve a particular hash submitted for a WRKChain, we can run:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>undcli query wrkchain block <span class="token punctuation">[</span>WRKCHAIN_ID<span class="token punctuation">]</span> <span class="token punctuation">[</span>HEIGHT<span class="token punctuation">]</span>
</code></pre></div><ul><li><code>[WRKCHAIN_ID]</code> - the numeric ID for the WRKChain</li> <li><code>[HEIGHT]</code> - the block number we wish to retrieve</li></ul> <p>If <code>[HEIGHT]</code> has been submitted for <code>[WRKCHAIN_ID]</code>, the data will be
returned in a JSON object, If not, the returned object will contain empty
values, meaning the WRKChain has not submitted a value for this block
height.</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">5/12/2020, 11:48:35 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/examples/transactions.html" class="prev">
        Sending Simple Transactions
      </a></span> <span class="next"><a href="/examples/beacon.html">
        BEACON Example
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.741cff61.js" defer></script><script src="/assets/js/2.77c7029e.js" defer></script><script src="/assets/js/13.385829a7.js" defer></script>
  </body>
</html>
