<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Google Cloud 101 | Mainchain Documentation</title>
    <meta name="generator" content="VuePress 1.5.4">
    
    <meta name="description" content="Welcome to the documentation for Unification Mainchain">
    <link rel="preload" href="/assets/css/0.styles.7eae06db.css" as="style"><link rel="preload" href="/assets/js/app.741cff61.js" as="script"><link rel="preload" href="/assets/js/2.77c7029e.js" as="script"><link rel="preload" href="/assets/js/15.14749093.js" as="script"><link rel="prefetch" href="/assets/js/10.f37d54ff.js"><link rel="prefetch" href="/assets/js/11.9b05973b.js"><link rel="prefetch" href="/assets/js/12.f09b51f7.js"><link rel="prefetch" href="/assets/js/13.385829a7.js"><link rel="prefetch" href="/assets/js/14.998374fc.js"><link rel="prefetch" href="/assets/js/16.70bcaf63.js"><link rel="prefetch" href="/assets/js/17.52701c2e.js"><link rel="prefetch" href="/assets/js/18.4717075d.js"><link rel="prefetch" href="/assets/js/19.8072ada9.js"><link rel="prefetch" href="/assets/js/20.a337da92.js"><link rel="prefetch" href="/assets/js/21.f6ac7b29.js"><link rel="prefetch" href="/assets/js/22.0b8e3f64.js"><link rel="prefetch" href="/assets/js/23.8d745efd.js"><link rel="prefetch" href="/assets/js/24.417b10a5.js"><link rel="prefetch" href="/assets/js/25.578a1199.js"><link rel="prefetch" href="/assets/js/26.cd5bb93a.js"><link rel="prefetch" href="/assets/js/27.b126edc4.js"><link rel="prefetch" href="/assets/js/28.e4a7ded3.js"><link rel="prefetch" href="/assets/js/29.6e1e7b98.js"><link rel="prefetch" href="/assets/js/3.edee95fc.js"><link rel="prefetch" href="/assets/js/30.ca3ce80a.js"><link rel="prefetch" href="/assets/js/31.4d9fb6a8.js"><link rel="prefetch" href="/assets/js/32.8a3a1f24.js"><link rel="prefetch" href="/assets/js/33.7ddc8051.js"><link rel="prefetch" href="/assets/js/34.9dcf1fa4.js"><link rel="prefetch" href="/assets/js/35.5ebf71ec.js"><link rel="prefetch" href="/assets/js/36.3a89ece3.js"><link rel="prefetch" href="/assets/js/4.6201d3d6.js"><link rel="prefetch" href="/assets/js/5.a58ba2da.js"><link rel="prefetch" href="/assets/js/6.7de9e217.js"><link rel="prefetch" href="/assets/js/7.01a03464.js"><link rel="prefetch" href="/assets/js/8.724889e8.js"><link rel="prefetch" href="/assets/js/9.ae3ae2f8.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7eae06db.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/img/unification_logoblack.png" alt="Mainchain Documentation" class="logo"> <span class="site-name can-hide">Mainchain Documentation</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/unification-com/mainchain/releases" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Releases
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/unification-com/mainchain" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/unification-com/mainchain/releases" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Releases
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/unification-com/mainchain" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>About Mainchain</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Install and Use the Software</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Networks</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Tx &amp; Query Examples</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>In-depth Guides</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guides/cloud/install-aws.html" class="sidebar-link">AWS 101</a></li><li><a href="/guides/cloud/install-gc.html" aria-current="page" class="active sidebar-link">Google Cloud 101</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guides/cloud/install-gc.html#introduction-to-installing-und-on-google-cloud-vms" class="sidebar-link">Introduction to installing und on Google Cloud VMs</a></li><li class="sidebar-sub-header"><a href="/guides/cloud/install-gc.html#part-0-create-a-new-project-enable-apis" class="sidebar-link">Part 0: Create a new Project &amp; Enable APIs</a></li><li class="sidebar-sub-header"><a href="/guides/cloud/install-gc.html#part-1-create-an-ssh-key-pair" class="sidebar-link">Part 1: Create an SSH key pair</a></li><li class="sidebar-sub-header"><a href="/guides/cloud/install-gc.html#part-2-vpc-network-firewall-rules" class="sidebar-link">Part 2: VPC Network &amp; Firewall rules</a></li><li class="sidebar-sub-header"><a href="/guides/cloud/install-gc.html#part-3-create-a-vm-instance" class="sidebar-link">Part 3: Create a VM Instance</a></li><li class="sidebar-sub-header"><a href="/guides/cloud/install-gc.html#part-4-log-in-to-vm-and-configure-via-ssh" class="sidebar-link">Part 4: Log in to VM and configure via SSH</a></li><li class="sidebar-sub-header"><a href="/guides/cloud/install-gc.html#part-5-initialising-your-full-node" class="sidebar-link">Part 5: Initialising your full node</a></li><li class="sidebar-sub-header"><a href="/guides/cloud/install-gc.html#part-6-running-und-as-a-daemon" class="sidebar-link">Part 6: Running und as a daemon</a></li><li class="sidebar-sub-header"><a href="/guides/cloud/install-gc.html#part-7-become-a-validator" class="sidebar-link">Part 7: Become a Validator</a></li><li class="sidebar-sub-header"><a href="/guides/cloud/install-gc.html#part-8-final-cleanup" class="sidebar-link">Part 8: Final cleanup</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Developers</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="google-cloud-101"><a href="#google-cloud-101" class="header-anchor">#</a> Google Cloud 101</h1> <h4 id="contents"><a href="#contents" class="header-anchor">#</a> Contents</h4> <p></p><div class="table-of-contents"><ul><li><a href="#introduction-to-installing-und-on-google-cloud-vms">Introduction to installing und on Google Cloud VMs</a></li><li><a href="#part-0-create-a-new-project-enable-apis">Part 0: Create a new Project &amp; Enable APIs</a></li><li><a href="#part-1-create-an-ssh-key-pair">Part 1: Create an SSH key pair</a></li><li><a href="#part-2-vpc-network-firewall-rules">Part 2: VPC Network &amp; Firewall rules</a><ul><li><a href="#_2-1-create-a-vpc">2.1: Create a VPC</a></li><li><a href="#_2-2-firewall-rules">2.2: Firewall Rules</a></li></ul></li><li><a href="#part-3-create-a-vm-instance">Part 3: Create a VM Instance</a></li><li><a href="#part-4-log-in-to-vm-and-configure-via-ssh">Part 4: Log in to VM and configure via SSH</a><ul><li><a href="#part-4-1-create-and-mount-the-data-drive">Part 4.1: Create and Mount the data drive</a></li><li><a href="#part-4-2-install-the-prerequisites">Part 4.2: Install the prerequisites</a></li><li><a href="#part-4-3-install-the-und-binary">Part 4.3: Install the und binary</a></li></ul></li><li><a href="#part-5-initialising-your-full-node">Part 5: Initialising your full node</a><ul><li><a href="#download-the-latest-genesis-file">Download the latest Genesis file.</a></li><li><a href="#get-seed-nodes">Get seed nodes</a></li></ul></li><li><a href="#part-6-running-und-as-a-daemon">Part 6: Running und as a daemon</a></li><li><a href="#part-7-become-a-validator">Part 7: Become a Validator</a></li><li><a href="#part-8-final-cleanup">Part 8: Final cleanup</a></li></ul></div><p></p> <h2 id="introduction-to-installing-und-on-google-cloud-vms"><a href="#introduction-to-installing-und-on-google-cloud-vms" class="header-anchor">#</a> Introduction to installing <code>und</code> on Google Cloud VMs</h2> <div class="custom-block danger"><p class="custom-block-title">WARNING</p> <p>If you intend to become a <code>MainNet</code> Validator, it is <strong>HIGHLY</strong> recommended that you practice on <code>TestNet</code> first in order to <em>fully familiarise</em> yourself with the process.</p></div> <p>This guide introduces a <em>very simple</em> &quot;quick start&quot; single Google Cloud VM, using simple network infrastructure to connect to a Mainchain Public network. Validator node operators are <strong>highly encouraged</strong> to explore more sophisticated architecture configurations to increase the security, reliability and availability of their Validator node - for example, multi layered network with both private/public subnets, one or more &quot;sentry&quot; full (non-validator) nodes placed in front of your main (hidden in a private subnet) Validator node to handle and relay communication from the outside world, and reverse proxy for any RPC access via the sentries etc. in addition to implementing hardware KMS solutions to protect validator private keys.</p> <div class="custom-block danger"><p class="custom-block-title">Important</p> <p>This guide should not be considered the default, full, out of the box solution for a Validator node, but more an &quot;Google Cloud 101&quot; guide to familiarise the reader with the core concepts involved in setting up the minimum GC VM and associated service requirements in order to operate a Validator node. It should be considered a starting point giving you the initial building blocks from which to build a more sophisticated network/node architecture to support and protect your Validator node.</p></div> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>any public IPs generated by Google Cloud during this guide are not static - they will change if the VM instance is restarted. It is recommended that the reader also investigates GC static IPs for their public-facing node(s).</p></div> <p>Where the guide prompts users to open a terminal, Windows 10 users should use PowerShell.</p> <p>This guide assumes the reader already has a Google Cloud account.</p> <h2 id="part-0-create-a-new-project-enable-apis"><a href="#part-0-create-a-new-project-enable-apis" class="header-anchor">#</a> Part 0: Create a new Project &amp; Enable APIs</h2> <p>If you do not have an existing project for the node, you’ll need to create a new GC project. Click on the menu icon in the top left of the GC console, and select &quot;Home&quot; followed by &quot;Create new project&quot;. Give the project a suitable name, check it is in the correct organisation and click &quot;Create&quot;.
Once created, in the organisation/project drop-down (top-left of the console in the header), select your new project name.</p> <p>Next, go to &quot;Menu&quot; and click on &quot;APIs &amp; Services&quot;. Click the &quot;Enable APIs and Services&quot; button. From the filter menu on the left, select &quot;Compute&quot;, then enable billing for &quot;Compute Engine API&quot;.</p> <h2 id="part-1-create-an-ssh-key-pair"><a href="#part-1-create-an-ssh-key-pair" class="header-anchor">#</a> Part 1: Create an SSH key pair</h2> <p>An SSH key is required to log in to your GC VM - this can be created on your local PC, using the ssh-keygen command.</p> <p>Open a terminal on your local PC, and check if you have a <code>$HOME/.ssh</code> directory:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">ls</span> -la <span class="token environment constant">$HOME</span>/.ssh
</code></pre></div><p>If you do not have a <code>$HOME/.ssh</code> directory, create it:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">mkdir</span> <span class="token environment constant">$HOME</span>/.ssh
$ <span class="token function">chmod</span> <span class="token number">700</span> <span class="token environment constant">$HOME</span>/.ssh
</code></pre></div><p>Run the following commands, replacing <strong><code>vmusername</code></strong> with something easily identifiable such as the admin username (only letters, no spaces) you will choose later in the guide for the VM, and enter a password to encrypt the key when prompted to do so:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ ssh-keygen -t rsa -b <span class="token number">4096</span> -f <span class="token environment constant">$HOME</span>/.ssh/gc_vmusername_id_rsa
$ <span class="token function">chmod</span> <span class="token number">400</span> <span class="token environment constant">$HOME</span>/.ssh/gc_vmusername_id_rsa
</code></pre></div><p>Finally, the public key will be required later in the guide, so open it up in a text editor. The public key counterpart has the <code>.pub</code> file extension, e.g. <code>$HOME/.ssh/gc_vmusername_id_rsa.pub</code></p> <h2 id="part-2-vpc-network-firewall-rules"><a href="#part-2-vpc-network-firewall-rules" class="header-anchor">#</a> Part 2: VPC Network &amp; Firewall rules</h2> <p>We first need to create a VPC and define some firewall rules that will allow your node to communicate via P2P, and allow you to broadcast transactions to your node. Validator operators are encouraged to explore more sophisticated configurations for their production node, and not just rely on the defaults.</p> <h3 id="_2-1-create-a-vpc"><a href="#_2-1-create-a-vpc" class="header-anchor">#</a> 2.1: Create a VPC</h3> <p>From the Google Cloud console menu, scroll down to &quot;VPC Network&quot; and click &quot;VPC Networks&quot;. Click the &quot;Create VPC Network&quot; button.</p> <ol><li>Enter a suitable name for the VPC, such as &quot;und-vpc&quot;, and a description.
For &quot;Subnets&quot;, select &quot;Automatic&quot;.</li> <li>Don’t select any of the predefined firewall rules.</li> <li>Leave the rest as defaults, and click the &quot;Create&quot; button.</li></ol> <h3 id="_2-2-firewall-rules"><a href="#_2-2-firewall-rules" class="header-anchor">#</a> 2.2: Firewall Rules</h3> <p>First, we need a firewall rule that allows only your local PC’s IP address to connect via SSH. You can find your IP address by running ifconfig in a terminal, or visiting <a href="https://www.whatismyip.com" target="_blank" rel="noopener noreferrer">https://www.whatismyip.com<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <div class="custom-block tip"><p class="custom-block-title">Note</p> <p>if your PC’s IP changes, you will need to update this rule in order to connect to your VM.</p></div> <ol><li>Click the Menu button in the top left of the GC console, scroll down to &quot;VPC Network&quot; and click &quot;Firewall Rules&quot;. Click the &quot;Create Firewall Rule&quot; button.</li> <li>Enter a name for the rule, such as <code>&quot;und-node-ssh</code>&quot;, and suitable description.
Change the value for &quot;Network&quot; from &quot;<code>default</code>&quot; to <code>&quot;und-vpc</code>&quot; (or whatever you called your VPC Network).</li> <li>For &quot;direction of traffic&quot;, select &quot;Ingres&quot; and for &quot;Action on Match&quot;, select &quot;Allow&quot;</li> <li>For &quot;Targets&quot;, select &quot;Specified Target Tag&quot;, and enter &quot;<code>und-node</code>&quot; under &quot;Target Tags&quot; (this will be used as the &quot;network tag&quot; when creating the VM instance later).</li> <li>For &quot;Source IP Ranges&quot;, enter <code>YOUR_IP/32</code>, for example <code>22.33.44.55/32</code>
Under &quot;Protocols and Ports&quot;, select &quot;specified protocols and ports&quot;, tick &quot;<code>tcp</code>&quot; and enter <code>22</code> as the port</li> <li>Click &quot;Create&quot;</li></ol> <p>Next, we need a firewall rule that allows the node to communicate via P2P.</p> <ol><li>Click the &quot;Create Firewall Rule&quot; button.</li> <li>Enter a name for the rule, such as &quot;<code>und-node-p2p</code>&quot;, and suitable description.</li> <li>Leave logs &quot;off&quot;.</li> <li>Change the value for &quot;Network&quot; from &quot;default&quot; to &quot;<code>und-vpc</code>&quot; (or whatever you called your VPC Network)</li> <li>For &quot;direction of traffic&quot;, select &quot;Ingres&quot; and for &quot;Action on Match&quot;, select &quot;Allow&quot;</li> <li>For &quot;Targets&quot;, select &quot;Specified Target Tag&quot;, and enter &quot;<code>und-node</code>&quot; under &quot;Target Tags&quot; (this will be used as the &quot;network tag&quot; when creating the VM instance later).</li> <li>For &quot;Source IP Ranges&quot;, enter <code>0.0.0.0/0</code></li> <li>Under &quot;Protocols and Ports&quot;, select &quot;specified protocols and ports&quot;, tick &quot;tcp&quot; and enter <code>26656</code> as the port</li> <li>Click &quot;Create&quot;.</li></ol> <p>Next, we need to open the RPC port, so that we can broadcast Txs to the node. As with the SSH rule, we should restrict access to our own IP.</p> <p>Repeat the steps above. Use &quot;<code>und-node-rpc</code>&quot; as the name, and <code>YOUR_IP/32</code> (e.g. <code>22.33.44.55/32</code>) as the IP range. Finally, tick &quot;<code>tcp</code>&quot; and enter <code>26657</code> as the port. As before, enter &quot;<code>und-node</code>&quot; under &quot;Target Tags&quot;, ensure you select &quot;<code>und-vpc</code>&quot; as the network, and click &quot;Create&quot;.</p> <div class="custom-block tip"><p class="custom-block-title">Note</p> <p>port 26657 can be closed on your Validator node once you have registered your validator.</p></div> <h2 id="part-3-create-a-vm-instance"><a href="#part-3-create-a-vm-instance" class="header-anchor">#</a> Part 3: Create a VM Instance</h2> <p>To begin, ensure that billing for Compute Engine API is enabled for the current project. You will also need the public key for the SSH key created earlier.
We’ll now create a VM for the node.</p> <p>Click the Navigation Menu icon in the top left of the GC console, and go to Compute -&gt; Compute Engine -&gt; VM Instances. Click the &quot;Create&quot; button.
Give your VM instance a suitable name.</p> <ol><li>Under &quot;Machine Configuration&quot;, leave &quot;General purpose&quot; selected, along with &quot;N1&quot; for Series.</li> <li>For &quot;Machine Type&quot;, select &quot;<code>g1-small&quot;</code></li> <li>In the &quot;Boot Disk&quot; section click the &quot;Change&quot; button</li> <li>Select &quot;CentOS&quot; as the operating system, and &quot;CentOS 7&quot; as the version
Leave the disk size as default. Click the &quot;Select&quot; button.</li> <li>Click the &quot;Management, security, disks, networking, sole-tenancy&quot; link (under &quot;Firewall&quot;).</li> <li>Click the &quot;Security&quot; tab.</li> <li>Copy your SSH public key into the input &quot;Enter public SSH key&quot;.</li></ol> <div class="custom-block tip"><p class="custom-block-title">Note</p> <p>your public key will be in the format: <code>ssh-rsa PUBLIC_KEY username@host</code>. The &quot;<code>username@host</code>&quot; part will be used to define the <strong>admin username</strong> for the VM, e.g. <code>ssh-rsa PUBLIC_KEY vmusername@host</code></p></div> <ol start="8"><li>Click the &quot;Networking&quot; tab.</li> <li>Enter &quot;<code>und-node</code>&quot; in the &quot;Network tags&quot; input (this is the tag we selected to apply our firewall rules to earlier).</li> <li>Click the &quot;Network Interface&quot; option, and change the Network from &quot;<code>default</code>&quot; to &quot;<code>und-vpc</code>&quot; (or whatever you named your VPC earlier).</li> <li>Click in the &quot;Disks&quot; tab. Choose a suitable name, change the &quot;Type&quot; to &quot;SSD Persistant&quot;,
and set the size to 100Gb</li> <li>Leave the rest of the options as their defaults, and click the &quot;Create&quot; button.</li></ol> <h2 id="part-4-log-in-to-vm-and-configure-via-ssh"><a href="#part-4-log-in-to-vm-and-configure-via-ssh" class="header-anchor">#</a> Part 4: Log in to VM and configure via SSH</h2> <p>Once back on the Instances dashboard, you should see your new VM Instance listed. Find your instance, and make a note of the public IP address.</p> <div class="custom-block tip"><p class="custom-block-title">Note</p> <p>any text in <code>[square_brackets]</code> (<em>including</em> the square brackets) in the following commands should be replaced with your own values. For example, vmusername should be replaced with the administrator username entered when creating the VM in <a href="#part-3-create-a-vm-instance">Part 3</a>.</p></div> <p><strong>Note for Windows users</strong>: Windows 10 should have an SSH client available in the PowerShell terminal. Older Windows versions will require <a href="https://www.chiark.greenend.org.uk/~sgtatham/putty/" target="_blank" rel="noopener noreferrer">PuTTY<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>Open a terminal on your PC, and run:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">ssh</span> -i <span class="token environment constant">$HOME</span>/.ssh/<span class="token punctuation">[</span>gc_vmusername_id_rsa<span class="token punctuation">]</span> <span class="token punctuation">[</span>vmusername<span class="token punctuation">]</span>@<span class="token punctuation">[</span>vm_ip<span class="token punctuation">]</span>
</code></pre></div><h3 id="part-4-1-create-and-mount-the-data-drive"><a href="#part-4-1-create-and-mount-the-data-drive" class="header-anchor">#</a> Part 4.1: Create and Mount the data drive</h3> <p>The following commands will create a new partition and format it ready for the state db</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> mkfs.ext4 -m <span class="token number">0</span> -E <span class="token assign-left variable">lazy_itable_init</span><span class="token operator">=</span><span class="token number">0</span>,lazy_journal_init<span class="token operator">=</span><span class="token number">0</span>,discard /dev/sdb
<span class="token function">sudo</span> <span class="token function">mkdir</span> -p /mnt/disks/data
<span class="token function">sudo</span> <span class="token function">mount</span> -o discard,defaults /dev/sdb /mnt/disks/data
<span class="token function">sudo</span> <span class="token function">chmod</span> a+w /mnt/disks/data
<span class="token function">sudo</span> <span class="token function">cp</span> /etc/fstab /etc/fstab.backup
<span class="token builtin class-name">echo</span> <span class="token assign-left variable">UUID</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">sudo</span> blkid -s UUID -o value /dev/sdb<span class="token variable">`</span></span> /mnt/disks/data ext4 discard,defaults,nofail <span class="token number">0</span> <span class="token number">2</span> <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">tee</span> -a /etc/fstab
</code></pre></div><h3 id="part-4-2-install-the-prerequisites"><a href="#part-4-2-install-the-prerequisites" class="header-anchor">#</a> Part 4.2: Install the prerequisites</h3> <p>Update the installed packages:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> yum update -y
</code></pre></div><p>Install the following additional software:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> yum <span class="token function">install</span> <span class="token function">nano</span> jq -y
</code></pre></div><h3 id="part-4-3-install-the-und-binary"><a href="#part-4-3-install-the-und-binary" class="header-anchor">#</a> Part 4.3: Install the <code>und</code> binary</h3> <p>We have a shell <a href="https://github.com/unification-com/mainchain/blob/master/scripts/cloud_install.sh" target="_blank" rel="noopener noreferrer">script<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> available in the <a href="https://github.com/unification-com/mainchain" target="_blank" rel="noopener noreferrer">mainchain GitHub repository<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> which will automatically download and install the latest version of <code>und</code>. While still logged in to the VM instance via SSH, run the following:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sh</span> -c <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token function">curl</span> -sfSL https://git.io/JvHZO<span class="token variable">)</span></span>&quot;</span>
</code></pre></div><p>This should install the binary into <code>/usr/local/bin/und</code>. Verify the installation was successful:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">which</span> und
</code></pre></div><p>should output:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>/usr/local/bin/und
</code></pre></div><p>and:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>und version --long
</code></pre></div><p>should output something similar to:</p> <div class="language-toml extra-class"><pre class="language-toml"><code>name: UndMainchain
server_name: und
client_name: undcli
version: <span class="token number">1.4</span><span class="token punctuation">.</span><span class="token number">2</span>
commit: 72bd43882a2d8142649ff1faab2956ca2b627009
build_tags: netgo ledger
go: go version go1<span class="token punctuation">.</span><span class="token number">13.3</span> linux/amd64
</code></pre></div><h2 id="part-5-initialising-your-full-node"><a href="#part-5-initialising-your-full-node" class="header-anchor">#</a> Part 5: Initialising your full node</h2> <p>We’ll now initialise and configure the <code>und</code> node itself. As previously, any text in <code>[square_brackets]</code> (<em>including</em> the square brackets) in the following commands should be replaced with your own values accordingly. If you are not currently logged in to the VM instance via SSH, do so.</p> <p>Once logged in, run:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>und init <span class="token punctuation">[</span>your_node_tag<span class="token punctuation">]</span> --home<span class="token operator">=</span>/mnt/disks/data/.und_mainchain
</code></pre></div><p><code>[your_node_tag]</code> can be any ID you like but is restricted to ASCII characters.</p> <h3 id="download-the-latest-genesis-file"><a href="#download-the-latest-genesis-file" class="header-anchor">#</a> Download the latest Genesis file.</h3> <p>The following command downloads the latest genesis for the respective network. Command is all one line:</p> <h4 id="testnet"><a href="#testnet" class="header-anchor">#</a> TestNet</h4> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">curl</span> https://raw.githubusercontent.com/unification-com/testnet/master/latest/genesis.json <span class="token operator">&gt;</span> /mnt/disks/data/.und_mainchain/config/genesis.json
</code></pre></div><h4 id="mainnet"><a href="#mainnet" class="header-anchor">#</a> MainNet</h4> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">curl</span> https://raw.githubusercontent.com/unification-com/mainnet/master/latest/genesis.json <span class="token operator">&gt;</span> /mnt/disks/data/.und_mainchain/config/genesis.json
</code></pre></div><p>Get the current chain ID from genesis. Make a note of the output, it'll be required in commands later in the guide. Command is all on one line:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ jq --raw-output <span class="token string">'.chain_id'</span> /mnt/disks/data/.und_mainchain/.und_mainchain/config/genesis.json
</code></pre></div><h3 id="get-seed-nodes"><a href="#get-seed-nodes" class="header-anchor">#</a> Get seed nodes</h3> <div class="custom-block danger"><p class="custom-block-title">IMPORTANT</p> <p>Please ensure you get the correct seed node information for the network you would like to join! Remember to change the directory if you are using something other than the default <code>$HOME/.und_mainchain</code> directory!
For this guide, we are using <code>/mnt/disks/data/.und_mainchain</code> for the node's home directory.</p></div> <p>Your node will need to know at least one seed node in order to join the network
and begin P2P communication with other nodes in the network. The latest seed information will always be available at each network's respective Github repo:</p> <h4 id="testnet-https-github-com-unification-com-testnet-blob-master-latest-seed-nodes-md"><a href="#testnet-https-github-com-unification-com-testnet-blob-master-latest-seed-nodes-md" class="header-anchor">#</a> TestNet: <a href="https://github.com/unification-com/testnet/blob/master/latest/seed_nodes.md" target="_blank" rel="noopener noreferrer">https://github.com/unification-com/testnet/blob/master/latest/seed_nodes.md<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h4> <h4 id="mainnet-https-github-com-unification-com-mainnet-blob-master-latest-seed-nodes-md"><a href="#mainnet-https-github-com-unification-com-mainnet-blob-master-latest-seed-nodes-md" class="header-anchor">#</a> MainNet: <a href="https://github.com/unification-com/mainnet/blob/master/latest/seed_nodes.md" target="_blank" rel="noopener noreferrer">https://github.com/unification-com/mainnet/blob/master/latest/seed_nodes.md<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h4> <p>Go to the repo for the network you are connecting to and copy one or more of the seed nodes (you only need the <code>id@address:port</code>)</p> <p>Edit your node configuration file using nano:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">nano</span> /mnt/disks/data/.und_mainchain/config/config.toml
</code></pre></div><p>Hit <kbd>Ctrl</kbd>+<kbd>W</kbd>, type <code>[p2p]</code> (including the square brackets) and hit return - this will take you to the <code>[p2p]</code> section of the config file, which begins with:</p> <div class="language- extra-class"><pre class="language-text"><code>##### peer to peer configuration options #####
[p2p]
</code></pre></div><p>Find the <code>external_address = &quot;&quot;</code> variable about 9 lines below, and set it to your <code>vm_ip:26656</code> e.g.:</p> <div class="language-toml extra-class"><pre class="language-toml"><code><span class="token key property">external_address</span> <span class="token punctuation">=</span> <span class="token string">&quot;11.22.33.44:26656&quot;</span>
</code></pre></div><p>Find the <code>seeds = &quot;&quot;</code> variable about 12 lines below, and add the seed node information between the double quotes (comma separated, no spaces if more than one). For example:</p> <div class="language-toml extra-class"><pre class="language-toml"><code><span class="token key property">seeds</span> <span class="token punctuation">=</span> <span class="token string">&quot;node_id@ip:port&quot;</span>
</code></pre></div><p>Next, hit <kbd>Ctrl</kbd>+<kbd>W</kbd>, type <code>[rpc]</code> (including the square brackets) and hit return - this will take you to the <code>[rpc]</code> section of the config file, which begins with:</p> <div class="language- extra-class"><pre class="language-text"><code>##### rpc server configuration options #####
[rpc]
</code></pre></div><p>About 3 lines under this, find:</p> <div class="language-toml extra-class"><pre class="language-toml"><code><span class="token key property">laddr</span> <span class="token punctuation">=</span> <span class="token string">&quot;tcp://127.0.0.1:26657&quot;</span>
</code></pre></div><p>Change the value to:</p> <div class="language-toml extra-class"><pre class="language-toml"><code><span class="token key property">laddr</span> <span class="token punctuation">=</span> <span class="token string">&quot;tcp://0.0.0.0:26657&quot;</span>
</code></pre></div><p>Hit <kbd>Ctrl</kbd>+<kbd>X</kbd> followed by <code>y</code> and then return to save the file and exit nano.</p> <div class="custom-block tip"><p class="custom-block-title">Note</p> <p>you can revert the <code>[rpc]</code> configuration for port <code>26657</code> to:</p> <div class="language- extra-class"><pre class="language-text"><code>laddr = &quot;tcp://127.0.0.1:26657&quot;
</code></pre></div><p>once you have run the<code>create-validator</code> command. Broadcasting transactions can instead be done via a public RPC node, or, more securely, via a full node running on your local PC. See <a href="#part-8-final-cleanup">Part 8: Final cleanup</a> for further details.</p></div> <p><strong>Gas Prices &amp; Pruning</strong></p> <p>It is good practice to set the <code>minimum-gas-prices</code> value in <code>/mnt/disks/data/.und_mainchain/config/app.toml</code>, in order to protect your full node from spam transactions. This should be set as a decimal value in <code>nund</code>, and the recommended value is currently <strong><code>0.25nund</code></strong>. This means your node will ignore any Txs with a gas price below this value. To do so, open up <code>/mnt/disks/data/.und_mainchain/config/app.toml</code> in a text editor, and set <code>minimum-gas-prices</code></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">nano</span> /mnt/disks/data/.und_mainchain/config/app.toml
</code></pre></div><p>Change:</p> <div class="language-toml extra-class"><pre class="language-toml"><code><span class="token key property">minimum-gas-prices</span> <span class="token punctuation">=</span> <span class="token string">&quot;&quot;</span>
</code></pre></div><p>To, for example:</p> <div class="language-toml extra-class"><pre class="language-toml"><code><span class="token key property">minimum-gas-prices</span> <span class="token punctuation">=</span> <span class="token string">&quot;0.25nund&quot;</span>
</code></pre></div><div class="custom-block danger"><p class="custom-block-title">IMPORTANT</p> <p>There is a known issue with the <code>syncable</code> pruning option in the Cosmos SDK. Since <code>pruning = &quot;syncable&quot;</code> is the default value when <code>und init</code> is run, it is recommended to set the value to either <code>pruning = &quot;everything&quot;</code> or <code>pruning = &quot;nothing&quot;</code> in <code>/mnt/disks/data/.und_mainchain/config/app.toml</code>. Note that setting to <code>pruning = &quot;nothing&quot;</code> will increase storage usage considerably.</p></div> <p>Also, change the pruning configuration at the end of the file.</p> <p>Change:</p> <div class="language-toml extra-class"><pre class="language-toml"><code><span class="token key property">pruning</span> <span class="token punctuation">=</span> <span class="token string">&quot;syncable&quot;</span>
</code></pre></div><p>To:</p> <div class="language-toml extra-class"><pre class="language-toml"><code><span class="token key property">pruning</span> <span class="token punctuation">=</span> <span class="token string">&quot;everything&quot;</span>
</code></pre></div><p>Hit <kbd>Ctrl</kbd>+<kbd>X</kbd> followed by <code>y</code> and then return to save the file and exit nano.</p> <p>Finally, check that your node can connect to and sync with the network:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>und start --home<span class="token operator">=</span>/mnt/disks/data/.und_mainchain
</code></pre></div><p>The following output just means that the seed node has sent its peer address data to your node, and closed its connection:</p> <div class="language- extra-class"><pre class="language-text"><code>E[2020-03-19|09:42:06.072] Stopping peer for error                      module=p2p peer=&quot;Peer{MConn{1.2.3.4:26656} dcff5de69dcc170b28b6628a1336d420f7eb60c0 out}&quot; err=EOF
</code></pre></div><p>After a few seconds, you should see your node start downloading the blocks.
Hit <kbd>Ctrl</kbd>+<kbd>C</kbd> to stop the node - it will be configured as a background service next.</p> <div class="custom-block danger"><p class="custom-block-title">IMPORTANT</p> <p>keep your <code>/mnt/disks/data/.und_mainchain/config/node_key.json</code> and <code>/mnt/disks/data/.und_mainchain/config/priv_validator_key.json</code> files safe! These are required for your node to propose and sign blocks. If you ever migrate your node to a different host/VM instance, you will need these.</p></div> <h2 id="part-6-running-und-as-a-daemon"><a href="#part-6-running-und-as-a-daemon" class="header-anchor">#</a> Part 6: Running und as a daemon</h2> <p>Once you have initialised and tested the <code>und</code> node, it can be set up as a background daemon on the server using <code>systemctl</code>. This means that you can easily start/stop/restart the service, and do not need to leave the SSH session open while und is running.</p> <p>If you’re not logged in to your VM instance via SSH, log in. If you are still logged in, and have not stopped the und node, hit <kbd>Ctrl</kbd>+<kbd>C</kbd> to stop the node.</p> <p>We need to use the nano text editor to create the service configuration. Run:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">nano</span> /etc/systemd/system/und.service
</code></pre></div><p>Add the following <strong>as a minimum</strong>, replacing <code>vmusername</code> with the administrator username entered when creating the VM in Part 3.:</p> <div class="language- extra-class"><pre class="language-text"><code>[Unit]
Description=Unification Mainchain Validator Node

[Service]
User=vmusername
Group=vmusername
WorkingDirectory=/home/vmusername
ExecStart=/usr/local/bin/und start --home=/mnt/disks/data/.und_mainchain
LimitNOFILE=4096

[Install]
WantedBy=default.target
</code></pre></div><p>Note: the <code>ExecStart=</code> is all one line.</p> <p>Hit <kbd>Ctrl</kbd>+<kbd>X</kbd> followed by <code>y</code> and then return to save the file and exit nano.</p> <p>Run:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl daemon-reload
</code></pre></div><p>to update <code>systemctl</code></p> <p>You can now start and stop the Unification daemon in the background using:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">sudo</span> systemctl start und
$ <span class="token function">sudo</span> systemctl stop und
</code></pre></div><p>Finally, you can monitor the log output for the service by running:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> journalctl -u und --follow
</code></pre></div><p>and use <kbd>Ctrl</kbd>+<kbd>C</kbd> to exit the <code>journalctl</code> command. You can now log out of your SSH session and und will continue running in the background.</p> <h2 id="part-7-become-a-validator"><a href="#part-7-become-a-validator" class="header-anchor">#</a> Part 7: Become a Validator</h2> <div class="custom-block danger"><p class="custom-block-title">Important</p> <p>ensure your node has fully synced with the network before continuing.</p></div> <p>If not already logged in, log in to your VM instance via SSH, and run:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> journalctl -u und --follow
</code></pre></div><p>Once fully synced (check the downloaded height against the current clock in the block explorer), hit <kbd>Ctrl</kbd>+<kbd>C</kbd> to quit the journalctl command.</p> <p>You will need your Validator node’s Tendermint public key in order to register it on the Mainchain network as a validator. Whilst still in the SSH session connected to your VM, run:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>und tendermint show-validator --home<span class="token operator">=</span>/mnt/disks/data/.und_mainchain
</code></pre></div><p>Make a note of the output, as you will need this in later commands, where it will be referred to as <code>[your_validator_public_key]</code>.</p> <p>You can now exit the SSH session - the rest of the commands will be run in a terminal on your local PC.</p> <p>Go to <a href="https://github.com/unification-com/mainchain/releases/latest" target="_blank" rel="noopener noreferrer">https://github.com/unification-com/mainchain/releases/latest<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and download the <code>undcli</code> archive for your OS - for example, <code>undcli_v1.4.3_windows_x86_64.tar.gz</code>. You do not need to download the <code>und</code> archive. Extract the archive to a suitable location.</p> <p>Open a terminal/PowerShell, and <code>cd</code> into the directory where you extracted the <code>undcli</code> executable:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> path/to/extracted/undcli_directory
</code></pre></div><p>As previously, any text in <code>[square_brackets]</code> (<em>including</em> the square brackets) in the following commands should be replaced with your own values accordingly.</p> <p>If you do not already have a wallet/account, you can create one (on your local PC, not in the SSH session) by running:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>./undcli keys <span class="token function">add</span> account_name
</code></pre></div><p>If you already have a wallet, you can import the account using:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>./undcli keys <span class="token function">add</span> account_name --recover
</code></pre></div><p>in which case, you will be prompted for the mnemonic and a password to secure the wallet.</p> <p>From here, it is assumed the reader has an account with sufficient FUND from which to self-delegate and create their Validator node. The account you use to self-delegate will become the &quot;owner&quot; account of the Validator node.</p> <p>On your local PC, run the following command, replacing any text in <code>[square_brackets]</code> accordingly with your own values:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>./undcli tx staking create-validator <span class="token punctuation">\</span>
--amount<span class="token operator">=</span><span class="token punctuation">[</span>stake_in_nund<span class="token punctuation">]</span> <span class="token punctuation">\</span>
--pubkey<span class="token operator">=</span><span class="token punctuation">[</span>your_validator_public_key<span class="token punctuation">]</span> <span class="token punctuation">\</span>
--moniker<span class="token operator">=</span><span class="token string">&quot;[your_ev_moniker]&quot;</span> <span class="token punctuation">\</span>
--website<span class="token operator">=</span><span class="token string">&quot;[your_website]&quot;</span> <span class="token punctuation">\</span>
--details<span class="token operator">=</span><span class="token string">&quot;[description]&quot;</span> <span class="token punctuation">\</span>
--security-contact<span class="token operator">=</span><span class="token string">&quot;[security_email]&quot;</span> <span class="token punctuation">\</span>
--chain-id<span class="token operator">=</span><span class="token punctuation">[</span>chain_id<span class="token punctuation">]</span> <span class="token punctuation">\</span>
--commission-rate<span class="token operator">=</span><span class="token string">&quot;[0.10]&quot;</span> <span class="token punctuation">\</span>
--commission-max-rate<span class="token operator">=</span><span class="token string">&quot;[0.20]&quot;</span> <span class="token punctuation">\</span>
--commission-max-change-rate<span class="token operator">=</span><span class="token string">&quot;[0.01]&quot;</span> <span class="token punctuation">\</span>
--min-self-delegation<span class="token operator">=</span><span class="token string">&quot;1&quot;</span> <span class="token punctuation">\</span>
--gas<span class="token operator">=</span><span class="token string">&quot;auto&quot;</span> <span class="token punctuation">\</span>
--gas-prices<span class="token operator">=</span><span class="token string">&quot;0.25nund&quot;</span> <span class="token punctuation">\</span>
--gas-adjustment<span class="token operator">=</span><span class="token number">1.5</span> <span class="token punctuation">\</span>
--from<span class="token operator">=</span>account_name <span class="token punctuation">\</span>
--node<span class="token operator">=</span>tcp://<span class="token punctuation">[</span>vm_ip<span class="token punctuation">]</span>:26657 <span class="token punctuation">\</span>
--broadcast-mode block <span class="token punctuation">\</span>
--trust-node <span class="token boolean">false</span>
</code></pre></div><p><code>[stake_in_nund]</code> = (required) the amount of FUND in <code>nund</code> you are self-delegating. You can use the <code>undcli convert 1000 fund nund</code> command to convert FUND to nund. E.g. <code>1000000000000nund</code>.</p> <div class="custom-block warning"><p class="custom-block-title">Note</p> <p>do not enter more nund than you have in your wallet!</p></div> <p><code>[your_validator_public_key]</code> = (required) the public key output from the previous und tendermint show-validator command.</p> <p><code>[your_ev_moniker]</code> = (required) a publicly visible ID/tag for your Validator node.</p> <p><code>[your_website]</code> = (optional) website promoting your node</p> <p><code>[description]</code> = (optional) short description of your node</p> <p><code>[security_email]</code> = (optional) security contact for your organisation</p> <p><code>[chain_id]</code> = the network (e.g. <code>FUND-Mainchain-TestNet-v8</code>, or <code>FUND-Mainchain-MainNet-v1</code>) you are creating a validator on - this was obtained earlier in the guide via the <code>jq</code> command</p> <p><code>[account_name]</code> = the account self-delegating the FUND, previously created/imported with the <code>undcli keys add</code> command</p> <p><code>[vm_ip]</code> = the IP address of your EC2 instance running the full node - you can get this from your AWS EC2 Instances console.</p> <h4 id="commission-rates"><a href="#commission-rates" class="header-anchor">#</a> Commission Rates</h4> <p>Your commission rates can be set using the <code>--commission-rate</code> , <code>--commission-max-change-rate and</code> <code>--commission-max-rate</code> flags.</p> <p><code>--commission-rate</code>: The % commission you will earn from delegators' rewards. Keeping this low can attract more delegators to your node.</p> <p><code>--commission-max-rate</code>: The maximum you will ever increase your commission rate to - you cannot raise commission above this value. Again, keeping this low can attract more delegators.</p> <p><code>--commission-max-change-rate</code>: The maximum you can increase the commission-rate by per day. For example, if your maximum change rate is 0.01, you can only make changes in 0.01 increments, so from 0.10 (10%) to 0.11 (11%).</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>The values for <code>--commission-max-change-rate</code> and <code>--commission-max-rate</code> flags cannot be changed after the create-validator command has been run.</p></div> <p>Finally, the <code>--min-self-delegation</code> flag is the minimum amount of <code>nund</code> you are required to keep self-delegated to your validtor, meaning you must always have at least this amount self-delegated to your node.</p> <p>For example:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>./undcli tx staking create-validator <span class="token punctuation">\</span>
--amount<span class="token operator">=</span>1000000000000nund <span class="token punctuation">\</span>
--pubkey<span class="token operator">=</span>undvalconspub1zcjduepq6yq7drzefkavsrxhxk69cy63tj3r<span class="token punctuation">..</span>. <span class="token punctuation">\</span>
--moniker<span class="token operator">=</span><span class="token string">&quot;MyAwesomeNode&quot;</span> <span class="token punctuation">\</span>
--website<span class="token operator">=</span><span class="token string">&quot;https://my-node-site.com&quot;</span> <span class="token punctuation">\</span>
--details<span class="token operator">=</span><span class="token string">&quot;My node is awesome&quot;</span> <span class="token punctuation">\</span>
--security-contact<span class="token operator">=</span><span class="token string">&quot;security@my-node-site.com&quot;</span> <span class="token punctuation">\</span>
--chain-id<span class="token operator">=</span>FUND-Mainchain-TestNet-v8 <span class="token punctuation">\</span>
--commission-rate<span class="token operator">=</span><span class="token string">&quot;0.05&quot;</span> <span class="token punctuation">\</span>
--commission-max-rate<span class="token operator">=</span><span class="token string">&quot;0.10&quot;</span> <span class="token punctuation">\</span>
--commission-max-change-rate<span class="token operator">=</span><span class="token string">&quot;0.01&quot;</span> <span class="token punctuation">\</span>
--min-self-delegation<span class="token operator">=</span><span class="token string">&quot;1&quot;</span> <span class="token punctuation">\</span>
--gas<span class="token operator">=</span><span class="token string">&quot;auto&quot;</span> <span class="token punctuation">\</span>
--gas-prices<span class="token operator">=</span><span class="token string">&quot;0.25nund&quot;</span> <span class="token punctuation">\</span>
--gas-adjustment<span class="token operator">=</span><span class="token number">1.5</span> <span class="token punctuation">\</span>
--from<span class="token operator">=</span>my_new_wallet <span class="token punctuation">\</span>
--node<span class="token operator">=</span>tcp://33.44.55.66:26657 <span class="token punctuation">\</span>
--broadcast-mode block <span class="token punctuation">\</span>
--trust-node <span class="token boolean">false</span>
</code></pre></div><p>Your validator node should now be registered and contributing to the network. To verify, on you local PC, run the following:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>./undcli query staking validator <span class="token punctuation">\</span>
<span class="token variable"><span class="token variable">$(</span>undcli keys show <span class="token punctuation">[</span>account_name<span class="token punctuation">]</span> --bech<span class="token operator">=</span>val -a<span class="token variable">)</span></span> <span class="token punctuation">\</span>
--chain-id<span class="token operator">=</span><span class="token punctuation">[</span>chain_id<span class="token punctuation">]</span> <span class="token punctuation">\</span>
--node<span class="token operator">=</span>tcp://<span class="token punctuation">[</span>vm_ip<span class="token punctuation">]</span>:26657
</code></pre></div><p>Replacing <code>[account_name]</code>, <code>[chain_id]</code> and <code>[vm_ip]</code> accordingly. Assuming you are going through this guide on <code>TestNet</code>, you should also see your node listed in <a href="https://explorer-testnet.unification.io/validators" target="_blank" rel="noopener noreferrer">https://explorer-testnet.unification.io/validators<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="part-8-final-cleanup"><a href="#part-8-final-cleanup" class="header-anchor">#</a> Part 8: Final cleanup</h2> <p>Finally, it’s a good idea to close the <strong>RPC</strong> port (<code>26657</code>) on your validator node, leaving only the <strong>P2P</strong> port (<code>26656</code>) open so that it can communicate with other nodes. This can be done by deleting the firewall rule for the RPC port, and by reverting the RPC laddr configuration value in <code>config.toml</code> to the <code>127.0.0.1</code> IP address (which will restrict the node’s RPC access to localhost). Further interaction with the network can be done by spinning up a separate non-validator full node (on your local PC for example), and broadcasting transactions via that node instead.</p> <div class="custom-block danger"><p class="custom-block-title">Important</p> <p>Do not alter the <strong>P2P</strong> port (<code>26656</code>) configuration and firewall rules. If you do, your validator node will not be able to communicate with its peers.</p></div> <p>That’s it - you should now have a full Validator node up and running on a very basic Google Cloud Linux VM instance. Once again - Validator node operators are highly encouraged to explore more sophisticated architecture configurations to increase the security, reliability and availability of their Validator node.</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">3/5/2021, 4:33:34 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/guides/cloud/install-aws.html" class="prev">
        AWS 101
      </a></span> <span class="next"><a href="/developers/third-party.html">
        Third Party Tool Development
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.741cff61.js" defer></script><script src="/assets/js/2.77c7029e.js" defer></script><script src="/assets/js/15.14749093.js" defer></script>
  </body>
</html>
